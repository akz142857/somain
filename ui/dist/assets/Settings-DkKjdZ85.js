import{d as E,u as T,c as v,F as A,r as x,t as s,a as t,n as w,b as e,e as D,o as r,_ as B,f as k,g as M,w as U,h as O,i as R,M as q,j as L,v as V,k as G,l as H,m as z,p as J}from"./index-CeN4278f.js";const K={class:"channel-list"},P={key:0,class:"channel-grid"},Q={class:"channel-header"},W={class:"channel-name"},X={class:"header-right"},Y={key:0,class:"disabled-badge"},Z={class:"channel-config"},ee={class:"channel-footer"},te={class:"channel-date"},se={class:"action-btns"},ne=["onClick"],le=["onClick"],ae=["onClick"],ie={key:1,class:"empty-state"},oe=E({__name:"AlertChannelList",props:{channels:{}},emits:["edit","delete","toggleEnabled"],setup($,{emit:l}){const i=l,{t:h}=T(),_=d=>d,g=d=>{const u=Object.entries(d.config);return u.length===0?"-":u.map(([a,m])=>`${a}: ${m.length>30?m.slice(0,30)+"...":m}`).join(", ")};return(d,u)=>(r(),v("div",K,[$.channels.length?(r(),v("div",P,[(r(!0),v(A,null,x($.channels,a=>(r(),v("div",{key:a.id,class:w(["channel-card",{disabled:!a.enabled}])},[e("div",Q,[e("span",W,s(a.name),1),e("div",X,[a.enabled?D("",!0):(r(),v("span",Y,s(t(h)("alert.disabled")),1)),e("span",{class:w(["type-badge",_(a.type)])},s(t(h)(`alert.${a.type}`)),3)])]),e("div",Z,s(g(a)),1),e("div",ee,[e("span",te,s(a.createdAt.split("T")[0]),1),e("div",se,[e("button",{class:w(["toggle-btn",a.enabled?"enabled":"off"]),onClick:m=>i("toggleEnabled",a.id,!a.enabled)},s(a.enabled?t(h)("alert.enabled"):t(h)("alert.disabled")),11,ne),e("button",{class:"edit-btn",onClick:m=>i("edit",a)},s(t(h)("action.edit")),9,le),e("button",{class:"delete-btn",onClick:m=>i("delete",a.id)},s(t(h)("action.delete")),9,ae)])])],2))),128))])):(r(),v("div",ie,s(t(h)("alert.noChannels")),1))]))}}),ce=B(oe,[["__scopeId","data-v-70b5db4a"]]),de={class:"form-grid"},re={class:"form-item"},ue={class:"form-item"},ve=["value"],he=["onUpdate:modelValue"],_e=E({__name:"AlertChannelForm",props:{visible:{type:Boolean},channel:{}},emits:["close","save"],setup($,{emit:l}){const i=$,h=l,{t:_}=T(),g=k(""),d=k("feishu"),u=k({}),a=["feishu","webhook","email"],m=M(()=>{switch(d.value){case"feishu":return[{key:"webhookUrl",label:_("alert.webhookUrl")}];case"webhook":return[{key:"url",label:"URL"},{key:"secret",label:"Secret"}];case"email":return[{key:"emailAddress",label:_("alert.emailAddress")}];default:return[]}}),C=M(()=>i.channel?_("alert.editChannel"):_("alert.addChannel"));U(()=>i.visible,b=>{b&&(i.channel?(g.value=i.channel.name,d.value=i.channel.type,u.value={...i.channel.config}):(g.value="",d.value="feishu",u.value={}))}),U(d,(b,p)=>{p!==b&&(i.channel&&i.channel.type===b||(u.value={}))});const f=()=>{g.value.trim()&&h("save",{name:g.value,type:d.value,config:{...u.value}})};return(b,p)=>(r(),O(q,{visible:$.visible,title:C.value,onClose:p[2]||(p[2]=o=>h("close")),onConfirm:f},{default:R(()=>[e("div",de,[e("div",re,[e("label",null,s(t(_)("alert.channelName")),1),L(e("input",{"onUpdate:modelValue":p[0]||(p[0]=o=>g.value=o),type:"text",class:"input"},null,512),[[V,g.value]])]),e("div",ue,[e("label",null,s(t(_)("alert.channelType")),1),L(e("select",{"onUpdate:modelValue":p[1]||(p[1]=o=>d.value=o),class:"input"},[(r(),v(A,null,x(a,o=>e("option",{key:o,value:o},s(t(_)(`alert.${o}`)),9,ve)),64))],512),[[G,d.value]])]),(r(!0),v(A,null,x(m.value,o=>(r(),v("div",{key:o.key,class:"form-item"},[e("label",null,s(o.label),1),L(e("input",{"onUpdate:modelValue":S=>u.value[o.key]=S,type:"text",class:"input"},null,8,he),[[V,u.value[o.key]]])]))),128))])]),_:1},8,["visible","title"]))}}),ge=B(_e,[["__scopeId","data-v-2f7f9b1d"]]),me={class:"settings-page"},pe={class:"page-title"},be={class:"settings-layout"},fe={class:"settings-nav"},ye=["onClick"],Ce={class:"settings-content"},ke={id:"section-general",class:"settings-section"},$e={class:"section-title"},we={class:"setting-row"},Ae={class:"setting-info"},xe={class:"setting-name"},Se={class:"setting-desc"},Le={class:"lang-options"},De={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"var(--color-primary)"},Ee={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"var(--color-primary)"},Te={class:"setting-row"},Be={class:"setting-info"},Me={class:"setting-name"},Ue={class:"setting-desc"},Ve={class:"setting-row"},ze={class:"setting-info"},Fe={class:"setting-name"},Ie={class:"setting-desc"},Ne={id:"section-notifications",class:"settings-section"},je={class:"section-title"},Oe={class:"section-desc"},Re={class:"section-toolbar"},qe={id:"section-about",class:"settings-section"},Ge={class:"section-title"},He={class:"setting-row"},Je={class:"setting-info"},Ke={class:"setting-name"},Pe=E({__name:"Settings",setup($){const{t:l,locale:i}=T(),{getAlertChannels:h,createAlertChannel:_,updateAlertChannel:g,deleteAlertChannel:d}=J(),u=k("general"),a=["general","notifications","about"],m=k([]),C=k(!1),f=k(null),b=async()=>{m.value=(await h()).value};H(b);const p=c=>{i.value=c,document.documentElement.lang=c},o=c=>{var n;u.value=c,(n=document.getElementById(`section-${c}`))==null||n.scrollIntoView({behavior:"smooth"})},S=()=>{f.value=null,C.value=!0},F=c=>{f.value=c,C.value=!0},I=async c=>{f.value?await g(f.value.id,c):await _(c),C.value=!1,f.value=null,await b()},N=async(c,n)=>{await g(c,{enabled:n}),await b()},j=async c=>{await d(c),await b()};return(c,n)=>(r(),v("div",me,[e("h1",pe,s(t(l)("settings.pageTitle")),1),e("div",be,[e("nav",fe,[(r(),v(A,null,x(a,y=>e("div",{key:y,class:w(["nav-item",{active:u.value===y}]),onClick:Qe=>o(y)},s(y==="general"?t(l)("settings.general"):y==="notifications"?t(l)("nav.notifications"):t(l)("settings.about")),11,ye)),64))]),e("div",Ce,[e("div",ke,[e("h2",$e,s(t(l)("settings.general")),1),e("div",we,[e("div",Ae,[e("div",xe,s(t(l)("settings.language")),1),e("div",Se,s(t(l)("settings.languageDesc")),1)])]),e("div",Le,[e("div",{class:w(["lang-option",{active:t(i)==="en"}]),onClick:n[0]||(n[0]=y=>p("en"))},[n[4]||(n[4]=e("span",{class:"lang-label"},"English",-1)),t(i)==="en"?(r(),v("svg",De,[...n[3]||(n[3]=[e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):D("",!0)],2),e("div",{class:w(["lang-option",{active:t(i)==="zh"}]),onClick:n[1]||(n[1]=y=>p("zh"))},[n[6]||(n[6]=e("span",{class:"lang-label"},"中文",-1)),t(i)==="zh"?(r(),v("svg",Ee,[...n[5]||(n[5]=[e("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):D("",!0)],2)]),e("div",Te,[e("div",Be,[e("div",Me,s(t(l)("settings.simulation")),1),e("div",Ue,s(t(l)("settings.simulationDesc")),1)])]),e("div",Ve,[e("div",ze,[e("div",Fe,s(t(l)("settings.theme")),1),e("div",Ie,s(t(l)("settings.themeDesc")),1)]),n[7]||(n[7]=e("span",{class:"setting-value"},"Dark sidebar + Light content",-1))])]),e("div",Ne,[e("h2",je,s(t(l)("settings.notifications")),1),e("p",Oe,s(t(l)("settings.notificationsDesc")),1),e("div",Re,[e("button",{class:"add-btn",onClick:S},"+ "+s(t(l)("alert.addChannel")),1)]),z(ce,{channels:m.value,onEdit:F,onDelete:j,onToggleEnabled:N},null,8,["channels"])]),e("div",qe,[e("h2",Ge,s(t(l)("settings.about")),1),e("div",He,[e("div",Je,[e("div",Ke,s(t(l)("settings.version")),1)]),n[8]||(n[8]=e("span",{class:"setting-value"},"0.1.0",-1))])])])]),z(ge,{visible:C.value,channel:f.value,onClose:n[2]||(n[2]=y=>C.value=!1),onSave:I},null,8,["visible","channel"])]))}}),Xe=B(Pe,[["__scopeId","data-v-51daa0ec"]]);export{Xe as default};
